<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Common door script</title>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
  <link type="text/css" href="../default.css" rel="stylesheet" />
</head>

<body>

<h1>Common door script</h1>

<div class="content">

<p>This script may be used for door Sprite Actors to provide their automatic opening when a praticular Actor touches them, and closing when it moves away. This script has been copied from LBA 1.</p>

<h5>Life Script:</h5>
<div class="Example">
  <span class="sctrl">comportement</span> <span class="sparam">main</span><br />
  <span class="scmd indent0">set_door_up</span> <span class="sparam">1550</span> <span class="scom">//initial door position</span><br />
  <span class="sctrl indent0">set_comportement</span> <span class="sparam">2</span><br />
  <span class="sctrl">end_comportement</span><br />
  <span class="sctrl">comportement</span> <span class="sparam">1</span><br />
  <span class="skey indent0">if</span> <span class="svar">col_obj</span> <span class="sparam">0</span> <span class="sop">==</span> <span class="skey">self</span> <span class="scom">//Actor 0 touches the door</span><br />
  <span class="skey indent1">set_track</span> <span class="sparam">0</span><br />
  <span class="sctrl indent1">set_comportement</span> <span class="sparam">2</span><br />
  <span class="skey indent0">endif</span><br />
  <span class="sctrl">end_comportement</span><br />
  <span class="sctrl">comportement</span> <span class="sparam">2</span><br />
  <span class="skey indent0">if</span> <span class="svar">distance</span> <span class="sparam">0</span> <span class="sop">&gt;</span> <span class="sparam">3500</span> <span class="scom">//Actor 0 moves away from the door</span><br />
  <span class="skey indent1">set_track</span> <span class="sparam">1</span><br />
  <span class="sctrl indent1">set_comportement</span> <span class="sparam">1</span><br />
  <span class="skey indent0">endif</span><br />
  <span class="sctrl">end_comportement</span><br />
  <span class="sctrl">end</span>
</div>

<h5 class="prelabel">Editor-friendly version:</h5>
<pre>
comportement main
  set_door_up 1550 //initial door position
  set_comportement 2
end_comportement
comportement 1
  if col_obj 0 == SELF //Actor 0 touches the door
    set_track 0
    set_comportement 2
  endif
end_comportement
comportement 2
  if distance 0 > 3500 //Actor 0 moves away from the door
    set_track 1
    set_comportement 1
  endif
end_comportement
end
</pre>

<h5>Track Script:</h5>
<div class="Example">
  <span class="sctrl">label</span> <span class="sparam">0</span><br />
  <span class="scmd indent0">background</span> <span class="sparam">0</span> <span class="scom">//start drawing the Actor</span><br />
  <span class="scmd indent0">sample</span> <span class="sparam">35</span> <span class="scom">//play door moving sound</span><br />
  <span class="scmd indent0">open_up</span> <span class="sparam">1550</span><br />
  <span class="scmd indent0">wait_door</span> <span class="scom">//wait for the open_up command to finish</span><br />
  <span class="skey indent0">stop</span><br />
  <span class="sctrl">label</span> <span class="sparam">1</span><br />
  <span class="scmd indent0">sample</span> <span class="sparam">35</span><br />
  <span class="scmd indent0">close</span><br />
  <span class="scmd indent0">wait_door</span><br />
  <span class="scmd indent0">background</span> <span class="sparam">1</span><br />
  <span class="skey indent0">stop</span><br />
  <span class="sctrl">end</span><br />
</div>

<h5 class="prelabel">Editor-friendly version:</h5>
<pre>
label 0
  background 0 //start drawing the Actor
  sample 35 //play door moving sound
  open_up 1550
  wait_door //wait for the open_up command to finish
  stop
label 1
  sample 35
  close
  wait_door
  background 1
  stop
end
</pre>

<h5>See also:</h5>
<ul>
  <li>Life Script: <a href="../LifeScript/cmd/set_door_xx.htm">SET_DOOR_XX</a> (command)</li>
  <li>Life Script: <a href="../LifeScript/var/col.htm">COL_OBJ</a> (variable)</li>
  <li>Life Script: <a href="../LifeScript/cmd/set_track.htm">SET_TRACK</a> (command)</li>
  <li>Life Script: <a href="../LifeScript/var/distance.htm">DISTANCE</a> (variable)</li>
  <li>Track Script: <a href="../TrackScript/open_xxx.htm">OPEN_XXX</a></li>
  <li>Track Script: <a href="../TrackScript/close.htm">CLOSE</a></li>
  <li>Track Script: <a href="../TrackScript/sample.htm">SAMPLE</a></li>
  <li>Track Script: <a href="../TrackScript/wait_door.htm">WAIT_DOOR</a></li>
  <li>Track Script: <a href="../TrackScript/background.htm">BACKGROUND</a></li>
</ul>

</div>

</body>
</html>
